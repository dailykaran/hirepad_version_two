# AI HR Recruiter MVP - Application Prompt

## Project Overview
Build an AI-powered HR recruitment application that conducts automated audio interviews. This is an MVP (Minimum Viable Product) focusing on a streamlined candidate screening process using Google's AI technologies.

## Technology Stack
- **LLM**: Google Gemini API (gemini-1.5-flash or gemini-1.5-pro)
- **Speech-to-Text**: Google Cloud Speech-to-Text API
- **Email Delivery**: MCP (Model Context Protocol) server for automated email notifications
- **Frontend**: React with hooks
- **Backend**: Node.js/Express (for secure API key management and MCP integration)

## Core Features

### 1. Application Flow
- **Audio-to-Text Interview System**: Candidates respond to questions via audio, which is transcribed in real-time using Google Speech-to-Text
- **7-Question Interview**: The system asks exactly 7 questions based on the candidate's self-introduction, generated by Gemini AI
- **Live Transcription Display**: Show real-time text transcription of candidate responses
- **AI Evaluation**: Analyze and score candidate answers automatically using Gemini AI

### 2. Key Functionalities

#### Self-Introduction Phase
- Allow candidate to record an audio self-introduction
- Transcribe the introduction to text using Google Speech-to-Text
- Display the transcription for candidate verification
- Gemini AI analyzes the introduction to generate 7 relevant follow-up questions

#### Interview Phase
- Present 7 dynamically generated questions one at a time
- For each question:
  - Display the question clearly
  - Enable audio recording of candidate's answer
  - Show real-time transcription of their response using Google Speech-to-Text
  - Allow candidate to review before submitting
  - Move to next question after submission

#### Evaluation Phase
- Gemini AI evaluates all 7 answers based on:
  - Relevance to the question
  - Clarity and coherence
  - Technical/professional competency (if applicable)
  - Communication skills
- Display evaluation results with scores/ratings
- Provide brief feedback for each answer
- Generate an overall assessment summary

#### Interview Summary Report
- Comprehensive report generated at the end of the interview using Gemini AI
- Include the following sections:
  - **Candidate Information**: Name, position applied for, interview date/time
  - **Self-Introduction Summary**: Key highlights from candidate's introduction
  - **Question-by-Question Breakdown**: 
    - Each question with full transcription of answer
    - Individual scores and feedback
    - Key strengths identified per answer
  - **Overall Performance Metrics**:
    - Average score across all questions
    - Communication effectiveness rating
    - Technical competency rating (if applicable)
    - Confidence level assessment
  - **Strengths & Weaknesses Summary**: Aggregate analysis across all answers
  - **Hiring Recommendation**: Clear recommendation (Highly Recommended / Recommended / Consider / Not Recommended)
  - **Next Steps Suggestion**: Recommended actions for recruiter
- Report should be:
  - Printable/downloadable as PDF
  - Shareable via link or email
  - Professional formatting with clear sections and visual elements (charts/graphs optional)

#### Email Notification System (Using MCP)
- **Automated email delivery of summary report to HR using Model Context Protocol (MCP)**
- Send interview summary report via email after completion
- MCP Integration Options (Choose one):
  - **Gmail MCP Server**: For Google Workspace environments
  - **SendGrid MCP Server**: For scalable transactional emails
  - **SMTP MCP Server**: For generic SMTP providers
  - **Resend MCP Server**: Modern email API alternative
- Email features:
  - Send PDF report as attachment
  - Include key metrics in email body
  - CC/BCC multiple HR recipients
  - Customizable email templates
  - Delivery status tracking
- MCP enables AI assistant to:
  - Compose professional email content automatically
  - Attach generated PDF reports
  - Handle multiple recipients
  - Track email delivery status
  - Retry failed deliveries

### 3. Technical Requirements

#### UI/UX Design
- Clean, professional interface suitable for job candidates
- Mobile-responsive design
- Clear visual indicators for recording status
- Progress indicator showing question number (e.g., "Question 3 of 7")
- Intuitive navigation between sections

#### Audio Handling
- Browser-based audio recording (use Web Audio API or MediaRecorder)
- Visual feedback during recording (waveform or recording indicator)
- Play back option for candidates to review their answers
- Support common audio formats (WAV, MP3)
- Convert audio to format compatible with Google Speech-to-Text (LINEAR16, FLAC, or other supported formats)

#### Speech-to-Text Integration
- **Use Google Speech-to-Text API (Cloud Speech-to-Text)**
- Real-time or near-real-time transcription
- Display transcription as candidate speaks or immediately after
- Handle pauses and natural speech patterns
- Supports multiple audio formats and encoding
- Automatic punctuation and formatting
- **Setup Requirements**:
  - Google Cloud account with Speech-to-Text API enabled
  - API key or service account credentials
  - Free tier: 60 minutes per month
  - Pay-as-you-go pricing after free tier

#### AI Integration
- **Use Google Gemini API for LLM tasks**
- Gemini API handles:
  - Analyzing self-introduction and generating 7 relevant questions
  - Evaluating each answer for quality and relevance
  - Generating constructive feedback and scores
  - Creating comprehensive summary reports
- **Setup Requirements**:
  - Google AI Studio account (ai.google.dev)
  - Free Gemini API key
  - Gemini 1.5 Flash or Gemini 1.5 Pro models recommended
  - Free tier: 15 requests per minute, 1 million tokens per day
- Structure prompts to maintain consistency across evaluations
- Use system instructions to define the HR recruiter persona and evaluation criteria

### 4. Data Structure

```javascript
// Candidate Session
{
  candidateId: string,
  timestamp: datetime,
  selfIntroduction: {
    audioUrl: string,
    transcription: string,
    duration: number
  },
  questions: [
    {
      questionNumber: number,
      questionText: string,
      answer: {
        audioUrl: string,
        transcription: string,
        duration: number
      },
      evaluation: {
        score: number,
        feedback: string,
        strengths: string[],
        improvements: string[]
      }
    }
  ],
  overallAssessment: {
    totalScore: number,
    summary: string,
    recommendation: string
  },
  summaryReport: {
    candidateInfo: {
      name: string,
      position: string,
      interviewDate: datetime,
      duration: number
    },
    introductionHighlights: string[],
    performanceMetrics: {
      averageScore: number,
      communicationRating: number,
      technicalRating: number,
      confidenceLevel: string
    },
    strengthsAndWeaknesses: {
      topStrengths: string[],
      areasForImprovement: string[]
    },
    hiringRecommendation: {
      level: string, // "Highly Recommended" | "Recommended" | "Consider" | "Not Recommended"
      reasoning: string,
      nextSteps: string
    },
    reportGeneratedAt: datetime
  }
}
```

### 5. User Journey

1. **Welcome Screen**: Introduction to the AI interview process
2. **Self-Introduction**: Record and review self-introduction (max 2-3 minutes)
3. **Question Generation**: Brief loading screen while Gemini AI generates questions
4. **Interview Loop**: Answer 7 questions sequentially
5. **Processing**: Gemini AI evaluates all responses
6. **Results**: View evaluation and overall assessment
7. **Summary Report**: Comprehensive interview summary report with download option
8. **Email Notification**: Automated email sent to HR with PDF report attached via MCP

### 6. MVP Constraints

- Keep it simple and functional
- Focus on core workflow first
- No user authentication for MVP (session-based)
- No database persistence required (in-memory storage acceptable)
- Single candidate session at a time
- English language only for MVP
- **API Usage**: Stay within free tier limits
  - Gemini: 15 requests/minute, 1M tokens/day
  - Google Speech-to-Text: 60 minutes/month free
  - SendGrid: 100 emails/day free tier
  - Gmail: Standard Gmail API quotas apply
- Backend required for secure API key management (don't expose keys in frontend)
- MCP server runs as separate process or service

### 7. Optional Enhancements (Post-MVP)

- Save interview history to database
- Email summary report with customizable templates
- Multi-language support (leverage Google's multilingual capabilities)
- Video recording option
- Practice mode before actual interview
- Recruiter dashboard to view all candidates
- Comparison reports between multiple candidates
- Custom branding for company logos and colors
- Integration with ATS (Applicant Tracking Systems)
- Batch processing for multiple candidates
- SMS notifications via MCP (using services like Twilio)
- Slack notifications to HR channel
- Calendar integration for scheduling follow-ups
- Email delivery tracking and analytics

## Implementation Notes

- Use React for the frontend with hooks for state management
- Implement proper error handling for audio recording failures
- Provide clear instructions at each step
- Add loading states and progress indicators
- Ensure accessibility (keyboard navigation, ARIA labels)
- Test on multiple browsers and devices
- For PDF generation, consider libraries like jsPDF or react-pdf
- Implement print-friendly CSS for the summary report

### API Integration Details

#### Google Speech-to-Text Setup
```javascript
// Install: npm install @google-cloud/speech
import speech from '@google-cloud/speech';

const client = new speech.SpeechClient({
  keyFilename: 'path/to/service-account-key.json'
});

// Configure recognition
const config = {
  encoding: 'LINEAR16',
  sampleRateHertz: 16000,
  languageCode: 'en-US',
  enableAutomaticPunctuation: true,
};
```

#### Google Gemini API Setup
```javascript
// Install: npm install @google/generative-ai
import { GoogleGenerativeAI } from '@google/generative-ai';

const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

// Example: Generate interview questions
const prompt = `Based on this candidate's self-introduction: "${introduction}"
Generate 7 relevant interview questions for an HR screening interview.`;

const result = await model.generateContent(prompt);
```

#### MCP Email Server Setup

**Example: SendGrid MCP Server**
```javascript
// Install: npm install sendgrid-api-mcp-server
// Configure in your MCP settings or use programmatically

import { Client } from '@modelcontextprotocol/sdk/client/index.js';
import { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio.js';

// Initialize MCP client
const transport = new StdioClientTransport({
  command: 'npx',
  args: ['-y', 'sendgrid-api-mcp-server'],
  env: {
    SENDGRID_API_KEY: process.env.SENDGRID_API_KEY,
    FROM_EMAIL: process.env.SENDGRID_FROM_EMAIL
  }
});

const client = new Client({
  name: 'hr-recruiter-app',
  version: '1.0.0'
}, {
  capabilities: {}
});

await client.connect(transport);

// Send email with PDF attachment via MCP
const emailResult = await client.callTool('send_email', {
  to: 'hr@company.com',
  subject: `Interview Summary - ${candidateName}`,
  html: `<h1>Interview Completed</h1>
         <p>Candidate: ${candidateName}</p>
         <p>Position: ${position}</p>
         <p>Overall Score: ${overallScore}/100</p>
         <p>Please find the detailed report attached.</p>`,
  attachments: [{
    content: pdfBase64Content,
    filename: `${candidateName}_Interview_Report.pdf`,
    type: 'application/pdf',
    disposition: 'attachment'
  }]
});
```

**Alternative: Gmail MCP Server**
```javascript
// Install: npm install @gongrzhe/server-gmail-autoauth-mcp

// First-time authentication
// Run: npx @gongrzhe/server-gmail-autoauth-mcp auth

// In your application
const transport = new StdioClientTransport({
  command: 'npx',
  args: ['@gongrzhe/server-gmail-autoauth-mcp'],
  env: {} // Credentials stored globally after auth
});

// Send email
await client.callTool('send_email', {
  to: ['hr@company.com', 'recruiter@company.com'],
  subject: `New Interview: ${candidateName}`,
  body: emailBodyHtml,
  attachments: [{
    filename: 'interview_report.pdf',
    content: pdfBuffer
  }]
});
```

**SMTP MCP Server (Universal)**
```javascript
// Install: npm install smtp-email-manager-mcp

const transport = new StdioClientTransport({
  command: 'node',
  args: ['/path/to/smtp-mcp-server/index.js'],
  env: {
    SMTP_HOST: process.env.SMTP_HOST,
    SMTP_PORT: process.env.SMTP_PORT,
    SMTP_USER: process.env.SMTP_USER,
    SMTP_PASSWORD: process.env.SMTP_PASSWORD
  }
});
```

### Environment Variables Required
```
# Gemini AI
GEMINI_API_KEY=your_gemini_api_key_here

# Google Speech-to-Text
GOOGLE_CLOUD_PROJECT_ID=your_project_id
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json

# Email Configuration (Choose one MCP server)
# Option 1: SendGrid
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@yourdomain.com

# Option 2: Gmail (via MCP)
GMAIL_CLIENT_ID=your_gmail_client_id
GMAIL_CLIENT_SECRET=your_gmail_client_secret
GMAIL_REFRESH_TOKEN=your_refresh_token

# Option 3: Generic SMTP
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@domain.com
SMTP_PASSWORD=your_app_password

# HR Recipients
HR_EMAIL_RECIPIENTS=hr@company.com,recruiter@company.com
```

### Getting API Keys

#### 1. Gemini API Key
- Visit https://ai.google.dev/
- Sign in with Google account
- Click "Get API Key" in Google AI Studio
- Create new API key or use existing project
- Free tier available: 15 requests/minute, 1M tokens/day

#### 2. Google Speech-to-Text
- Visit https://console.cloud.google.com/
- Create new project or select existing
- Enable "Cloud Speech-to-Text API" from API Library
- Go to "Credentials" section
- Create service account
- Download JSON key file
- Store securely on backend server
- Free tier: 60 minutes/month

#### 3. Email Service Setup (MCP Integration)

**Option A: SendGrid (Recommended for MVP)**
- Visit https://sendgrid.com/
- Create free account (100 emails/day free tier)
- Navigate to Settings > API Keys
- Create new API key with "Mail Send" permissions
- Verify sender email address
- Install MCP server: `npm install sendgrid-api-mcp-server`
- Repository: https://github.com/Garoth/sendgrid-mcp

**Option B: Gmail MCP Server**
- Visit https://console.cloud.google.com/
- Enable Gmail API
- Create OAuth 2.0 credentials
- Download credentials JSON file
- Run authentication: `npx @gongrzhe/server-gmail-autoauth-mcp auth`
- Install: `npm install @gongrzhe/server-gmail-autoauth-mcp`
- Repository: https://github.com/GongRzhe/Gmail-MCP-Server

**Option C: SMTP MCP Server (Universal)**
- Works with Gmail, Outlook, or any SMTP provider
- For Gmail: Enable "App Passwords" in Google Account settings
- Install: `npm install smtp-email-manager-mcp`
- Repository: https://github.com/samihalawa/smtp-email-manager
- Supports multiple SMTP configurations

**Option D: Resend (Modern Alternative)**
- Visit https://resend.com/
- Create account (3,000 emails/month free)
- Generate API key from dashboard
- Install MCP: Available via official Resend docs
- Repository: https://resend.com/docs/send-with-nodejs

### Security Best Practices
- Never expose API keys in frontend code
- Use environment variables for all credentials
- Implement backend proxy for API calls
- Add rate limiting to prevent abuse
- Sanitize user inputs before sending to APIs
- Implement CORS properly for production
- **MCP Security**:
  - Run MCP servers in isolated environments
  - Validate all tool inputs and outputs
  - Use secure transport protocols (HTTPS, WSS)
  - Implement authentication for MCP server access
  - Monitor and log all email sending activities
  - Set up email sending limits to prevent abuse

## Success Criteria

- Candidate can complete full interview flow without errors
- Audio is recorded and transcribed accurately using Google Speech-to-Text
- 7 relevant questions are generated from self-introduction by Gemini AI
- Evaluation provides meaningful feedback generated by Gemini AI
- Interface is intuitive and professional
- Process takes 15-20 minutes total
- Summary report is comprehensive, professional, and downloadable
- Report includes actionable insights for hiring decisions
- **Email notification successfully delivered to HR with PDF attachment via MCP**
- Application stays within free tier limits for MVP testing

## Cost Estimation (After Free Tier)
- **Gemini API**: $0.00025 per 1K characters (input), $0.00075 per 1K characters (output)
- **Speech-to-Text**: $0.006 per 15 seconds after free tier
- **SendGrid**: Free up to 100 emails/day, then $19.95/month for 50K emails
- **Gmail API**: Free (standard quotas apply)
- Estimated cost per interview: $0.10 - $0.30 (depending on length and complexity)
- Email delivery: Free within tier limits

## What is MCP (Model Context Protocol)?

MCP is an open standard introduced by Anthropic in November 2024 to standardize how AI systems integrate with external tools and data sources. Think of it as "USB-C for AI applications" - it provides a unified interface for AI assistants to interact with various services.

### Why Use MCP for Email?

**Traditional Approach vs MCP:**
- **Traditional**: Write custom code for each email provider, handle authentication, format messages, manage errors
- **MCP**: Use standardized protocol, AI assistant handles email composition, automatic retry logic, unified interface

### Key Benefits for This Project:
1. Standardized communication replaces custom API connectors with consistent protocol
2. Dynamic tool discovery enables AI models to automatically identify available services
3. Context-aware state management maintains context across multiple interactions
4. AI can compose professional emails automatically based on interview results
5. Handles multiple recipients, attachments, and delivery tracking
6. Easy to switch between email providers without code changes

### Available Open-Source MCP Email Servers:

1. **SendGrid MCP Server** (Recommended for MVP)
   - Repository: https://github.com/Garoth/sendgrid-mcp
   - Features: Marketing API, contact management, templates, stats
   - Free tier: 100 emails/day

2. **Gmail MCP Server**
   - Repository: https://github.com/GongRzhe/Gmail-MCP-Server
   - Features: Send/receive, attachments, labels, OAuth2
   - Free with Gmail account

3. **SMTP Email Manager MCP**
   - Creator: Sami Halawa
   - Features: Universal SMTP support, multiple configs, templates
   - Works with any SMTP provider

4. **Resend MCP Server**
   - Official: https://resend.com/docs
   - Features: Modern API, webhooks, analytics
   - Free tier: 3,000 emails/month

5. **Mailgun MCP Server**
   - Repository: https://github.com/mailgun/mailgun-mcp-server
   - Features: Read-only analytics, query capabilities
   - Focused on email insights

### MCP Architecture for Email Integration:

```
[React Frontend] 
    ↓
[Node.js Backend] 
    ↓
[Gemini AI] → Generates email content
    ↓
[MCP Client] → Communicates with email server
    ↓
[MCP Email Server] → SendGrid/Gmail/SMTP
    ↓
[Email Provider] → Delivers to HR recipients
```

The MCP layer abstracts the complexity of email sending, allowing the AI to handle composition while the MCP server handles delivery.